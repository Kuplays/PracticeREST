<!DOCTYPE html>
<html>
<head>
    <title>RESTmovies</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/babel">
    	var App = React.createClass({
	    	loadMovies: function() {
	    		var self = this;
	    		$.ajax({
	    			url:"http://localhost:9999/test/all"
	    		}).then(function(data) {
	    			self.setState({movies: data.movies});
	    		});
	    	},
	    	getInitialState: function() {
	    		return {movies: []};
	    	},
	    	componentDidMount: function() {
	    		this.loadMovies();
	    	},
	    	render() {
	    		return(<MoviesTable movies={this.state.movies}/>);
	    	}
    	});

    	var MoviesTable = React.createClass({
    		render: function() {
    			var rows = [];
    			this.props.movies.forEach(function(movie) {
    				rows.push(<Movie movie={movie}/>);
    			});

    			return (
    				<div className="container">
    					<table className="table table-striped">
    						<tbody>
    							{rows}
    						</tbody>
    					</table>
    				</div> 
    			);
    		}
    	});

    	var Movie = React.createClass({
    		getInitialState: function() {
    			return {display: true};
    		},

    		render: function() {
    			if (this.state.display==false) return null;
    			else return (
    				<tr>
    					{this.props.movies.title}<br/>
    					{this.props.movies.movieGenre}<br/>
    					<img src={this.props.movies.moviePosterURL}/>
    				</tr>
    			);
    		}
    	});

    	ReactDOM.render(<App/>, document.getElementById('root'));
    </script>

</head>
<body>
    <div id='root'></div>
    <script src="https://fb.me/react-15.0.1.js"></script>
    <script src="https://fb.me/react-dom-15.0.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</body>
</html>